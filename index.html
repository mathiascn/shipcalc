<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>shipcalc</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      body {
        background-color: #1a1a1a;
        color: #fff;
      }
    </style>
  </head>
  <body data-bs-theme="dark">
    <div>
        <div class="pt-3 d-flex justify-content-center bg-danger">
            <h1>shipcalc</h1>
        </div>
        <div class="container mt-3 p-3 w-50">
            <!-- Speed Input -->
            <div class="input-group mb-3">
                <span class="input-group-text" id="speed-label">Speed (knots)</span>
                <input type="number" id="speed" class="form-control" placeholder="Enter average ship speed" aria-label="Speed" aria-describedby="speed-label" value="10">
            </div>
            <!-- Weight Input -->
            <div class="input-group mb-3">
                <span class="input-group-text" id="weight-label">Weight (lbs)</span>
                <input type="number" id="weight" class="form-control" placeholder="Enter ship weight" aria-label="Weight" aria-describedby="weight-label" value="0">
            </div>
            <!-- Time Input -->
            <div class="input-group mb-3">
                <span class="input-group-text" id="time-label">Time (hours)</span>
                <input type="number" id="time" class="form-control" placeholder="Enter sailing time" aria-label="Time" aria-describedby="time-label" value="8">
            </div>
            <!-- Wind Strength -->
            <div class="input-group mb-3">
                <span class="input-group-text" id="wind-label">Wind Strength (1-10)</span>
                <input type="number" id="wind" class="form-control" placeholder="Enter wind strength" aria-label="Wind Strength" aria-describedby="wind-label" value="10">
            </div>
            <!-- Crew Efficiency -->
            <div class="input-group mb-3">
                <span class="input-group-text" id="crew-label">Crew Efficiency (1-100)</span>
                <input type="number" id="crew" class="form-control" placeholder="Enter crew efficiency" aria-label="Crew Efficiency" aria-describedby="crew-label" value="100">
            </div>
            <!-- Calculate Button -->
            <div class="d-flex justify-content-center">
                <button class="btn btn-primary" id="calculate">Calculate Distance</button>
            </div>
            <!-- Output -->
            <div class="mt-3 p-3 bg-secondary rounded">
                <h3>Result:</h3>
                <p id="result" class="fs-4">Enter values and click "Calculate Distance" to see the result.</p>
            </div>
        </div>
    </div>
    <script>
      document.getElementById('calculate').addEventListener('click', () => {
            //constants
            const maxCapacity = 50000;
            const exponent = 3;
            const epsilon = 0.1;
            const mileToKm = 1.852;

            // Retrieve input values
            const speed = parseFloat(document.getElementById('speed').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const time = parseFloat(document.getElementById('time').value);
            const wind = parseFloat(document.getElementById('wind').value);
            const crew = parseFloat(document.getElementById('crew').value);

            // Validate inputs
            if (isNaN(speed) || isNaN(weight) || isNaN(time) || isNaN(wind) || isNaN(crew)) {
                document.getElementById('result').textContent = 'Please enter valid numbers for all fields.';
                return;
            }

            if (wind < 1 || wind > 10) {
                document.getElementById('result').textContent = 'Wind strength must be between 1 and 10.';
                return;
            }

            if (crew <= 0 || crew > 100) {
                document.getElementById('result').textContent = 'Crew efficiency must be between 1 and 100.';
                return;
            }


            const baseDistance = speed * time; // Base distance calculation
            const windFactor = wind / 10; // Wind strength (1-10 normalized to 0.1-1)
            const crewFactor = crew / 100; // Crew efficiency (1-100 normalized to 0.01-1)
            const weightPenalty = 1 - Math.pow(weight / maxCapacity, exponent) + epsilon;

            const distance = baseDistance * windFactor * crewFactor * weightPenalty;
            console.log(`Distance ${distance}`);

            // Display result
            if (distance > 0) {
                document.getElementById('result').innerHTML = `The ship can travel:<br>Nautical miles: ${distance.toFixed(2)}<br>Kilometers: ${(distance * mileToKm).toFixed(2)}`;
            } else {
                document.getElementById('result').textContent = 'The ship cannot travel under these conditions.';
            }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
